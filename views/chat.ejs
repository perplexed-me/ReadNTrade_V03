<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatting...</title>
    <link rel="stylesheet" href="./style_chat.css"> <!-- Link to a stylesheet for improved UI -->
</head>

<body>
    
    <div id="chat-container">

        <!-- Display the current user's profile or name -->
        <header>
            <h2>Welcome, User <%= userID %></h2>
        </header>
        
        <!-- Allow user to manually enter a receiver ID -->
        <div id="add-room">
            <input type="text" id="receiver_id" placeholder="Enter User ID to chat">
            <button onclick="joinRoom('<%= userID %>',document.getElementById('receiver_id').value)">Start Chat</button>
        </div>

        <!-- Display list of users the current user has interacted with -->
        <div id="room-list">
            <% queryData.forEach(function(id) { %>
                <!-- Added an online status indicator (this is a placeholder and would need actual status data to work) -->
                <button onclick="joinRoom('<%=userID %>','<%= id %>')">User <%= id %> <span class="online-status"></span></button>
            <% }); %>
        </div>

        <div id="message-window">
            <div class="chat-header">
                Conversation with: <span id="chat-partner-name"></span>
            </div>
            <ul class="chat-messages" id="messages"></ul>

            <div class="chat-footer">
                <input type="text" id="message-text" placeholder="Type your message..." />
                <button onclick="sendMessage(document.getElementById('message-text').value)">Send</button>
            </div>
        </div>
        
        

        <!-- Message input area -->
        <!-- <div id="message-input">
            <input type="text" id="message-text" placeholder="Type your message">
            <button onclick="sendMessage(document.getElementById('message-text').value)">Send</button>
        </div> -->
    </div>

    <!-- Include the Socket.io client library -->
    <script src="/socket.io/socket.io.js"></script>
    <% if(includeChatClient) { %>
        <script src="./chatClient.js"></script>
    <% } %>

    <!-- Add a script to handle emoji support, notifications, etc. (just a placeholder for now)
    <script src="./extraFeatures.js"></script> -->

</body>

</html>
